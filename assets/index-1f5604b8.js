(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function M(){}function Ye(e,t){for(const n in t)e[n]=t[n];return e}function Je(e){return e()}function Se(){return Object.create(null)}function Q(e){e.forEach(Je)}function qe(e){return typeof e=="function"}function G(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Ze(e){return Object.keys(e).length===0}function xe(e,...t){if(e==null)return M;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Te(e,t,n){e.$$.on_destroy.push(xe(t,n))}function et(e,t,n,l){if(e){const r=Ue(e,t,n,l);return e[0](r)}}function Ue(e,t,n,l){return e[1]&&l?Ye(n.ctx.slice(),e[1](l(t))):n.ctx}function tt(e,t,n,l){if(e[2]&&l){const r=e[2](l(n));if(t.dirty===void 0)return r;if(typeof r=="object"){const i=[],o=Math.max(t.dirty.length,r.length);for(let s=0;s<o;s+=1)i[s]=t.dirty[s]|r[s];return i}return t.dirty|r}return t.dirty}function nt(e,t,n,l,r,i){if(r){const o=Ue(t,n,l,i);e.p(o,r)}}function lt(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let l=0;l<n;l++)t[l]=-1;return t}return-1}function d(e,t){e.appendChild(t)}function R(e,t,n){e.insertBefore(t,n||null)}function B(e){e.parentNode&&e.parentNode.removeChild(e)}function me(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function p(e){return document.createElement(e)}function N(e){return document.createTextNode(e)}function S(){return N(" ")}function Ge(){return N("")}function U(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function g(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function rt(e){return Array.from(e.childNodes)}function X(e,t){t=""+t,e.data!==t&&(e.data=t)}function te(e,t){e.value=t??""}function it(e,t,{bubbles:n=!1,cancelable:l=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n,l,t),r}let ie;function re(e){ie=e}function se(){if(!ie)throw new Error("Function called outside component initialization");return ie}function ot(e){se().$$.before_update.push(e)}function st(e){se().$$.on_mount.push(e)}function ut(){const e=se();return(t,n,{cancelable:l=!1}={})=>{const r=e.$$.callbacks[t];if(r){const i=it(t,n,{cancelable:l});return r.slice().forEach(o=>{o.call(e,i)}),!i.defaultPrevented}return!0}}function ct(e,t){return se().$$.context.set(e,t),t}function Ae(e){return se().$$.context.get(e)}function ft(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(l=>l.call(this,t))}const ee=[],oe=[];let ne=[];const we=[],at=Promise.resolve();let ke=!1;function dt(){ke||(ke=!0,at.then(He))}function ye(e){ne.push(e)}function $e(e){we.push(e)}const be=new Set;let Z=0;function He(){if(Z!==0)return;const e=ie;do{try{for(;Z<ee.length;){const t=ee[Z];Z++,re(t),ht(t.$$)}}catch(t){throw ee.length=0,Z=0,t}for(re(null),ee.length=0,Z=0;oe.length;)oe.pop()();for(let t=0;t<ne.length;t+=1){const n=ne[t];be.has(n)||(be.add(n),n())}ne.length=0}while(ee.length);for(;we.length;)we.pop()();ke=!1,be.clear(),re(e)}function ht(e){if(e.fragment!==null){e.update(),Q(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ye)}}function _t(e){const t=[],n=[];ne.forEach(l=>e.indexOf(l)===-1?t.push(l):n.push(l)),n.forEach(l=>l()),ne=t}const ae=new Set;let V;function ue(){V={r:0,c:[],p:V}}function ce(){V.r||Q(V.c),V=V.p}function $(e,t){e&&e.i&&(ae.delete(e),e.i(t))}function A(e,t,n,l){if(e&&e.o){if(ae.has(e))return;ae.add(e),V.c.push(()=>{ae.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}else l&&l()}function ve(e,t,n){const l=e.$$.props[t];l!==void 0&&(e.$$.bound[l]=n,n(e.$$.ctx[l]))}function T(e){e&&e.c()}function I(e,t,n,l){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,n),l||ye(()=>{const o=e.$$.on_mount.map(Je).filter(qe);e.$$.on_destroy?e.$$.on_destroy.push(...o):Q(o),e.$$.on_mount=[]}),i.forEach(ye)}function P(e,t){const n=e.$$;n.fragment!==null&&(_t(n.after_update),Q(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function mt(e,t){e.$$.dirty[0]===-1&&(ee.push(e),dt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function K(e,t,n,l,r,i,o,s=[-1]){const c=ie;re(e);const u=e.$$={fragment:null,ctx:[],props:i,update:M,not_equal:r,bound:Se(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:Se(),dirty:s,skip_bound:!1,root:t.target||c.$$.root};o&&o(u.root);let f=!1;if(u.ctx=n?n(e,t.props||{},(m,h,..._)=>{const a=_.length?_[0]:h;return u.ctx&&r(u.ctx[m],u.ctx[m]=a)&&(!u.skip_bound&&u.bound[m]&&u.bound[m](a),f&&mt(e,m)),h}):[],u.update(),f=!0,Q(u.before_update),u.fragment=l?l(u.ctx):!1,t.target){if(t.hydrate){const m=rt(t.target);u.fragment&&u.fragment.l(m),m.forEach(B)}else u.fragment&&u.fragment.c();t.intro&&$(e.$$.fragment),I(e,t.target,t.anchor,t.customElement),He()}re(c)}class W{$destroy(){P(this,1),this.$destroy=M}$on(t,n){if(!qe(n))return M;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const r=l.indexOf(n);r!==-1&&l.splice(r,1)}}$set(t){this.$$set&&!Ze(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const x=[];function de(e,t=M){let n;const l=new Set;function r(s){if(G(e,s)&&(e=s,n)){const c=!x.length;for(const u of l)u[1](),x.push(u,e);if(c){for(let u=0;u<x.length;u+=2)x[u][0](x[u+1]);x.length=0}}}function i(s){r(s(e))}function o(s,c=M){const u=[s,c];return l.add(u),l.size===1&&(n=t(r)||M),s(e),()=>{l.delete(u),l.size===0&&n&&(n(),n=null)}}return{set:r,update:i,subscribe:o}}const Ke=de([]);function We(e){return he[e]?he[e]:null}function gt(e,t){return he[e]=de(t),he[e]}const he={a:de(1),b:de(1)};function ge(e,t,n){console.log("emitting "+e+" in "+n),Ke.update(l=>{let r=new Array({name:e,props:t,grid:n});return r=l.concat(r),r})}function pt(e,t){ge("rowClick",{row:e},t)}function bt(e,t){ge("rowDoubleClick",{row:e},t)}function wt(e,t,n,l){ge("cellClick",{value:e,column:t,row:n},l)}function kt(e,t){console.log(e+":"+t),ge("headCellClick",{column:e},t)}function Ne(e,t,n){const l=e.slice();return l[9]=t[n],l}function Oe(e,t,n){const l=e.slice();return l[12]=t[n],l}function Be(e){let t,n=e[9][e[12]]+"",l,r,i;function o(){return e[4](e[9],e[12])}return{c(){t=p("td"),l=N(n)},m(s,c){R(s,t,c),d(t,l),r||(i=[U(t,"keypress",$t),U(t,"click",o)],r=!0)},p(s,c){e=s,c&3&&n!==(n=e[9][e[12]]+"")&&X(l,n)},d(s){s&&B(t),r=!1,Q(i)}}}function Re(e){let t,n,l,r,i=e[0],o=[];for(let c=0;c<i.length;c+=1)o[c]=Be(Oe(e,i,c));function s(){return e[5](e[9])}return{c(){t=p("tr");for(let c=0;c<o.length;c+=1)o[c].c();n=S()},m(c,u){R(c,t,u);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(t,null);d(t,n),l||(r=U(t,"click",s),l=!0)},p(c,u){if(e=c,u&7){i=e[0];let f;for(f=0;f<i.length;f+=1){const m=Oe(e,i,f);o[f]?o[f].p(m,u):(o[f]=Be(m),o[f].c(),o[f].m(t,n))}for(;f<o.length;f+=1)o[f].d(1);o.length=i.length}},d(c){c&&B(t),me(o,c),l=!1,r()}}}function yt(e){let t,n=e[1],l=[];for(let r=0;r<n.length;r+=1)l[r]=Re(Ne(e,n,r));return{c(){t=p("tbody");for(let r=0;r<l.length;r+=1)l[r].c()},m(r,i){R(r,t,i);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(t,null)},p(r,[i]){if(i&15){n=r[1];let o;for(o=0;o<n.length;o+=1){const s=Ne(r,n,o);l[o]?l[o].p(s,i):(l[o]=Re(s),l[o].c(),l[o].m(t,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},i:M,o:M,d(r){r&&B(t),me(l,r)}}}const $t=()=>{};function vt(e,t,n){let{columns:l}=t,{rows:r}=t,i=Ae("grid"),o=(()=>{var h=new WeakMap,_=0;return a=>(h.has(a)||h.set(a,++_),h.get(a))})();var s={};function c(h,_){pt(h,_);let a=o(h);s[a]&&new Date().getTime()-s[a]<500&&u(h,_),s[a]=new Date().getTime()}function u(h,_){bt(h,_)}const f=(h,_)=>wt(h[_],_,h,i),m=h=>c(h,i);return e.$$set=h=>{"columns"in h&&n(0,l=h.columns),"rows"in h&&n(1,r=h.rows)},[l,r,i,c,f,m]}class Ct extends W{constructor(t){super(),K(this,t,vt,yt,G,{columns:0,rows:1})}}function At(e){let t,n;return{c(){t=p("i"),g(t,"style",n=e[0]!=0?"font-size: {size}px;":""),g(t,"class",e[1])},m(l,r){R(l,t,r)},p(l,[r]){r&1&&n!==(n=l[0]!=0?"font-size: {size}px;":"")&&g(t,"style",n),r&2&&g(t,"class",l[1])},i:M,o:M,d(l){l&&B(t)}}}function Et(e,t,n){let{size:l=0}=t,{which:r=""}=t;return e.$$set=i=>{"size"in i&&n(0,l=i.size),"which"in i&&n(1,r=i.which)},[l,r]}class Qe extends W{constructor(t){super(),K(this,t,Et,At,G,{size:0,which:1})}}function je(e){let t,n,l,r;const i=[Nt,St],o=[];function s(c,u){return c[1].sortedBy.direction==1?0:c[1].sortedBy.direction==-1?1:-1}return~(t=s(e))&&(n=o[t]=i[t](e)),{c(){n&&n.c(),l=Ge()},m(c,u){~t&&o[t].m(c,u),R(c,l,u),r=!0},p(c,u){let f=t;t=s(c),t!==f&&(n&&(ue(),A(o[f],1,1,()=>{o[f]=null}),ce()),~t?(n=o[t],n||(n=o[t]=i[t](c),n.c()),$(n,1),n.m(l.parentNode,l)):n=null)},i(c){r||($(n),r=!0)},o(c){A(n),r=!1},d(c){~t&&o[t].d(c),c&&B(l)}}}function St(e){let t,n;return t=new Qe({props:{which:"fa-solid fa-arrow-down"}}),{c(){T(t.$$.fragment)},m(l,r){I(t,l,r),n=!0},i(l){n||($(t.$$.fragment,l),n=!0)},o(l){A(t.$$.fragment,l),n=!1},d(l){P(t,l)}}}function Nt(e){let t,n;return t=new Qe({props:{which:"fa-solid fa-arrow-up"}}),{c(){T(t.$$.fragment)},m(l,r){I(t,l,r),n=!0},i(l){n||($(t.$$.fragment,l),n=!0)},o(l){A(t.$$.fragment,l),n=!1},d(l){P(t,l)}}}function Ot(e){let t,n,l=e[1].sortedBy&&e[1].sortedBy.column==e[0]&&je(e);return{c(){l&&l.c(),t=Ge()},m(r,i){l&&l.m(r,i),R(r,t,i),n=!0},p(r,[i]){r[1].sortedBy&&r[1].sortedBy.column==r[0]?l?(l.p(r,i),i&3&&$(l,1)):(l=je(r),l.c(),$(l,1),l.m(t.parentNode,t)):l&&(ue(),A(l,1,1,()=>{l=null}),ce())},i(r){n||($(l),n=!0)},o(r){A(l),n=!1},d(r){l&&l.d(r),r&&B(t)}}}function Bt(e,t,n){let l,r=We(Ae("grid"));Te(e,r,o=>n(1,l=o));let{column:i}=t;return e.$$set=o=>{"column"in o&&n(0,i=o.column)},[i,l,r]}class Rt extends W{constructor(t){super(),K(this,t,Bt,Ot,G,{column:0})}}function Fe(e,t,n){const l=e.slice();return l[4]=t[n],l}function De(e){let t,n=e[4]+"",l,r,i,o,s,c;i=new Rt({props:{column:e[4]}});function u(){return e[2](e[4])}return{c(){t=p("th"),l=N(n),r=S(),T(i.$$.fragment)},m(f,m){R(f,t,m),d(t,l),d(t,r),I(i,t,null),o=!0,s||(c=U(t,"click",u),s=!0)},p(f,m){e=f,(!o||m&1)&&n!==(n=e[4]+"")&&X(l,n);const h={};m&1&&(h.column=e[4]),i.$set(h)},i(f){o||($(i.$$.fragment,f),o=!0)},o(f){A(i.$$.fragment,f),o=!1},d(f){f&&B(t),P(i),s=!1,c()}}}function jt(e){let t,n,l,r=e[0],i=[];for(let s=0;s<r.length;s+=1)i[s]=De(Fe(e,r,s));const o=s=>A(i[s],1,1,()=>{i[s]=null});return{c(){t=p("thead"),n=p("tr");for(let s=0;s<i.length;s+=1)i[s].c()},m(s,c){R(s,t,c),d(t,n);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(n,null);l=!0},p(s,[c]){if(c&3){r=s[0];let u;for(u=0;u<r.length;u+=1){const f=Fe(s,r,u);i[u]?(i[u].p(f,c),$(i[u],1)):(i[u]=De(f),i[u].c(),$(i[u],1),i[u].m(n,null))}for(ue(),u=r.length;u<i.length;u+=1)o(u);ce()}},i(s){if(!l){for(let c=0;c<r.length;c+=1)$(i[c]);l=!0}},o(s){i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)A(i[c]);l=!1},d(s){s&&B(t),me(i,s)}}}function Ft(e,t,n){let{columns:l=[]}=t,r=Ae("grid");const i=o=>{kt(o,r)};return e.$$set=o=>{"columns"in o&&n(0,l=o.columns)},[l,r,i]}class Dt extends W{constructor(t){super(),K(this,t,Ft,jt,G,{columns:0})}}function zt(e){let t,n;return t=new Ct({props:{columns:e[0],rows:e[1]}}),{c(){T(t.$$.fragment)},m(l,r){I(t,l,r),n=!0},p(l,r){const i={};r&1&&(i.columns=l[0]),r&2&&(i.rows=l[1]),t.$set(i)},i(l){n||($(t.$$.fragment,l),n=!0)},o(l){A(t.$$.fragment,l),n=!1},d(l){P(t,l)}}}function Lt(e){let t,n,l,r,i,o=JSON.stringify(e[0])+"",s,c,u,f,m=JSON.stringify(e[1])+"",h,_;return{c(){t=p("tr"),n=p("td"),l=N(`nothing!
            `),r=p("h1"),i=N("columns: "),s=N(o),c=S(),u=p("h1"),f=N("rows: "),h=N(m),g(n,"colspan",_=e[0].length),g(n,"class","align-center text-center p-4")},m(a,w){R(a,t,w),d(t,n),d(n,l),d(n,r),d(r,i),d(r,s),d(n,c),d(n,u),d(u,f),d(u,h)},p(a,w){w&1&&o!==(o=JSON.stringify(a[0])+"")&&X(s,o),w&2&&m!==(m=JSON.stringify(a[1])+"")&&X(h,m),w&1&&_!==(_=a[0].length)&&g(n,"colspan",_)},i:M,o:M,d(a){a&&B(t)}}}function Mt(e){let t,n,l,r,i,o;n=new Dt({props:{columns:e[0]}});const s=[Lt,zt],c=[];function u(f,m){return!f[1]||!f[0]||f[1].length==0||f[0].length==0?0:1}return r=u(e),i=c[r]=s[r](e),{c(){t=p("table"),T(n.$$.fragment),l=S(),i.c()},m(f,m){R(f,t,m),I(n,t,null),d(t,l),c[r].m(t,null),o=!0},p(f,[m]){const h={};m&1&&(h.columns=f[0]),n.$set(h);let _=r;r=u(f),r===_?c[r].p(f,m):(ue(),A(c[_],1,1,()=>{c[_]=null}),ce(),i=c[r],i?i.p(f,m):(i=c[r]=s[r](f),i.c()),$(i,1),i.m(t,null))},i(f){o||($(n.$$.fragment,f),$(i),o=!0)},o(f){A(n.$$.fragment,f),A(i),o=!1},d(f){f&&B(t),P(n),c[r].d()}}}function It(e,t,n){let{columns:l}=t,{rows:r}=t;return e.$$set=i=>{"columns"in i&&n(0,l=i.columns),"rows"in i&&n(1,r=i.rows)},[l,r]}class Pt extends W{constructor(t){super(),K(this,t,It,Mt,G,{columns:0,rows:1})}}function Jt(e){let t="";const n="abcdefghijklmnopqrstuvwxyz",l=n.length;let r=0;for(;r<e;)t+=n.charAt(Math.floor(Math.random()*l)),r+=1;return t}function qt(e){if(e!=null)for(let t of Ve)t.name==e.name&&t.grid==e.grid&&t.fn(e.props)}let Ve=[],ze=!1;function Tt(){ze||(Ke.subscribe(e=>{let t=e[e.length-1];qt(t)}),Ht(),ze=!0)}function Ce(e,t,n){Ve.push({name:e,fn:t,grid:n})}function Xe(e){Ce("headCellClick",function(t){Gt(t.column,e)},e)}let Ut={1:-1,0:1,"-1":0};function Gt(e,t){We(t).update(l=>{let r=0;return l.sortedBy.column==e&&(r=l.sortedBy.direction),{...l,sortedBy:{column:e,direction:Ut[r]}}})}function Ht(){Xe()}function Kt(e,t){if(!t)return e;let{column:n,direction:l}=t,r=[...e];return r.sort(Wt(n,l)),r}function Wt(e,t){return(n,l)=>{if(t==1)return Le(n[e],l[e]);if(t==-1)return-Le(n[e],l[e])}}function Le(e,t){return e==null||t==null?0:(e instanceof String||(e=e.toString()),t instanceof String||(t=t.toString()),Me(e)&&Me(t)?e-t:e.localeCompare(t))}function Me(e){return typeof e!="string"?!1:!isNaN(e)&&!isNaN(parseFloat(e))}function Qt(e,t,n){return!t||t.length==0?e:e.filter(l=>{l={...l};let r=!1,i=0;return t.forEach(o=>{o.fn(l)&&(r=!0,i++)}),n?i==t.length:r})}function Vt(e,t,n,l=!1){let r=[...e];return r=Kt(r,t),r=Qt(r,n,l),r}function Xt(e,t,n){let l=Object.keys(e[0]),r=[];for(let o=0;o<l.length;o++)t.includes(l[o])||r.push(l[o]);let i=[];for(let o of n)r.includes(o)&&i.push(o);return r.forEach(o=>{i.includes(o)||i.push(o)}),i}function Yt(e){let t,n,l,r,i;const o=e[2].default,s=et(o,e,e[1],null);return{c(){t=p("button"),s&&s.c(),g(t,"class",n="bg-blue-600 text-slate p-2 hover:bg-blue-800 "+e[0])},m(c,u){R(c,t,u),s&&s.m(t,null),l=!0,r||(i=U(t,"click",e[3]),r=!0)},p(c,[u]){s&&s.p&&(!l||u&2)&&nt(s,o,c,c[1],l?tt(o,c[1],u,null):lt(c[1]),null),(!l||u&1&&n!==(n="bg-blue-600 text-slate p-2 hover:bg-blue-800 "+c[0]))&&g(t,"class",n)},i(c){l||($(s,c),l=!0)},o(c){A(s,c),l=!1},d(c){c&&B(t),s&&s.d(c),r=!1,i()}}}function Zt(e,t,n){let{$$slots:l={},$$scope:r}=t,{classes:i=""}=t;function o(s){ft.call(this,e,s)}return e.$$set=s=>{"classes"in s&&n(0,i=s.classes),"$$scope"in s&&n(1,r=s.$$scope)},[i,r,l,o]}class _e extends W{constructor(t){super(),K(this,t,Zt,Yt,G,{classes:0})}}function Ie(e,t,n){const l=e.slice();return l[11]=t[n],l}function xt(e){let t;return{c(){t=N("Remove")},m(n,l){R(n,t,l)},d(n){n&&B(t)}}}function Pe(e){let t,n,l,r,i,o,s;function c(){return e[6](e[11])}return i=new _e({props:{classes:"bg-red-500 text-white p-4 grow-0 hover:bg-red-600",$$slots:{default:[xt]},$$scope:{ctx:e}}}),i.$on("click",c),{c(){t=p("li"),n=p("input"),r=S(),T(i.$$.fragment),o=S(),g(n,"class","bg-slate-300 text-slate-900 grow p-4"),g(n,"type","text"),g(n,"name","filter-value"),g(n,"id","filter-value"),n.readOnly=!0,n.value=l=e[11].value,g(t,"class","flex flex-row align-center mt-2")},m(u,f){R(u,t,f),d(t,n),d(t,r),I(i,t,null),d(t,o),s=!0},p(u,f){e=u,(!s||f&1&&l!==(l=e[11].value)&&n.value!==l)&&(n.value=l);const m={};f&16384&&(m.$$scope={dirty:f,ctx:e}),i.$set(m)},i(u){s||($(i.$$.fragment,u),s=!0)},o(u){A(i.$$.fragment,u),s=!1},d(u){u&&B(t),P(i)}}}function en(e){let t;return{c(){t=N("Add Filter")},m(n,l){R(n,t,l)},d(n){n&&B(t)}}}function tn(e){let t,n,l,r,i,o=e[0].length+"",s,c,u,f,m,h,_,a,w,D,j,H,z,b,E,F,L,J,Y,q=e[0],v=[];for(let k=0;k<q.length;k+=1)v[k]=Pe(Ie(e,q,k));const fe=k=>A(v[k],1,1,()=>{v[k]=null});return F=new _e({props:{$$slots:{default:[en]},$$scope:{ctx:e}}}),F.$on("click",e[9]),{c(){t=p("div"),n=p("div"),l=p("div"),r=p("h2"),i=N("Filters: ("),s=N(o),c=N(")"),u=S(),f=p("div"),m=p("label"),m.textContent="Match intersection",h=S(),_=p("input"),a=S(),w=p("ul");for(let k=0;k<v.length;k+=1)v[k].c();D=S(),j=p("div"),H=p("label"),H.textContent="New filter",z=S(),b=p("input"),E=S(),T(F.$$.fragment),g(r,"class","grow p-2"),g(m,"for","chk-any"),g(_,"class",""),g(_,"type","checkbox"),g(_,"name","chk-any"),g(_,"id","chk-any"),g(f,"class","p-2 bg-slate-900"),g(l,"class","text-white flex align-center"),g(n,"class","w-full p-4 border"),g(H,"for","txt-filter"),g(b,"class","bg-slate-300 text-slate-900 grow p-2"),g(b,"type","text"),g(b,"name","filter"),g(b,"id","txt-filter"),g(j,"class","w-full flex items-center mt-6 align-center gap-1"),g(t,"class","flex flex-col font-mono p-8 items-center")},m(k,O){R(k,t,O),d(t,n),d(n,l),d(l,r),d(r,i),d(r,s),d(r,c),d(l,u),d(l,f),d(f,m),d(f,h),d(f,_),_.checked=e[1],d(n,a),d(n,w);for(let y=0;y<v.length;y+=1)v[y]&&v[y].m(w,null);d(t,D),d(t,j),d(j,H),d(j,z),d(j,b),te(b,e[2]),d(j,E),I(F,j,null),L=!0,J||(Y=[U(_,"change",e[5]),U(b,"input",e[7]),U(b,"keydown",e[8])],J=!0)},p(k,[O]){if((!L||O&1)&&o!==(o=k[0].length+"")&&X(s,o),O&2&&(_.checked=k[1]),O&1){q=k[0];let C;for(C=0;C<q.length;C+=1){const le=Ie(k,q,C);v[C]?(v[C].p(le,O),$(v[C],1)):(v[C]=Pe(le),v[C].c(),$(v[C],1),v[C].m(w,null))}for(ue(),C=q.length;C<v.length;C+=1)fe(C);ce()}O&4&&b.value!==k[2]&&te(b,k[2]);const y={};O&16384&&(y.$$scope={dirty:O,ctx:k}),F.$set(y)},i(k){if(!L){for(let O=0;O<q.length;O+=1)$(v[O]);$(F.$$.fragment,k),L=!0}},o(k){v=v.filter(Boolean);for(let O=0;O<v.length;O+=1)A(v[O]);A(F.$$.fragment,k),L=!1},d(k){k&&B(t),me(v,k),P(F),J=!1,Q(Y)}}}function nn(e,t,n){let{filters:l}=t,{knownColumns:r=[]}=t,{matchAll:i=!1}=t,o="";function s(a){let w=null;try{w=new Function("r",`let {${r.join(", ")}} = r; return ${a}`)}catch{return!1}return w}function c(a){if(a=="")return;let w=s(a);w?(n(0,l=[...l,{value:a,fn:w}]),n(2,o="")):alert("Invalid filter")}function u(){i=this.checked,n(1,i)}const f=a=>{n(0,l=l.filter(w=>w.value!=a.value))};function m(){o=this.value,n(2,o)}const h=a=>{a.key=="Enter"&&c(o)},_=()=>{c(o)};return e.$$set=a=>{"filters"in a&&n(0,l=a.filters),"knownColumns"in a&&n(4,r=a.knownColumns),"matchAll"in a&&n(1,i=a.matchAll)},[l,i,o,c,r,u,f,m,h,_]}class ln extends W{constructor(t){super(),K(this,t,nn,tn,G,{filters:0,knownColumns:4,matchAll:1})}}function rn(e){let t,n,l,r,i,o,s,c,u=e[1].length+"",f,m,h=e[1].length==1?"":"s",_,a,w,D;function j(b){e[7](b)}function H(b){e[8](b)}let z={knownColumns:e[0]};return e[2].matchAll!==void 0&&(z.matchAll=e[2].matchAll),e[2].filters!==void 0&&(z.filters=e[2].filters),n=new ln({props:z}),oe.push(()=>ve(n,"matchAll",j)),oe.push(()=>ve(n,"filters",H)),w=new Pt({props:{columns:e[0],rows:e[1]}}),{c(){t=p("div"),T(n.$$.fragment),i=S(),o=p("div"),s=p("p"),c=N("("),f=N(u),m=N(") item"),_=N(h),a=S(),T(w.$$.fragment),g(s,"class","p-2"),g(o,"id","grid-table-container"),g(o,"class","overflow-auto"),g(t,"id","grid-container")},m(b,E){R(b,t,E),I(n,t,null),d(t,i),d(t,o),d(o,s),d(s,c),d(s,f),d(s,m),d(s,_),d(o,a),I(w,o,null),D=!0},p(b,[E]){const F={};E&1&&(F.knownColumns=b[0]),!l&&E&4&&(l=!0,F.matchAll=b[2].matchAll,$e(()=>l=!1)),!r&&E&4&&(r=!0,F.filters=b[2].filters,$e(()=>r=!1)),n.$set(F),(!D||E&2)&&u!==(u=b[1].length+"")&&X(f,u),(!D||E&2)&&h!==(h=b[1].length==1?"":"s")&&X(_,h);const L={};E&1&&(L.columns=b[0]),E&2&&(L.rows=b[1]),w.$set(L)},i(b){D||($(n.$$.fragment,b),$(w.$$.fragment,b),D=!0)},o(b){A(n.$$.fragment,b),A(w.$$.fragment,b),D=!1},d(b){b&&B(t),P(n),P(w)}}}function on(e,t,n){let l,{columns:r=[]}=t,{rows:i=[]}=t,{desiredColumns:o=null}=t,{preferredColumns:s=[]}=t,c=ut(),u=Jt(16);ct("grid",u);let f=gt(u,{matchAll:!1,filters:[],sortedBy:{column:null,direction:null},selected:[],id:u});Te(e,f,a=>n(2,l=a)),ot(()=>{console.log("rowing",i&&i.length!=0),i&&i.length!=0&&(n(0,r=Xt(i,new Array,s)),console.log("preprocessing",r))}),st(()=>{Tt(),Xe(u),Ce("rowClick",a=>c("rowClick",a),u),Ce("rowDoubleClick",a=>c("rowDoubleClick",a),u)});let{readyRows:m}=t;o==null&&(o=r);function h(a){e.$$.not_equal(l.matchAll,a)&&(l.matchAll=a,f.set(l))}function _(a){e.$$.not_equal(l.filters,a)&&(l.filters=a,f.set(l))}return e.$$set=a=>{"columns"in a&&n(0,r=a.columns),"rows"in a&&n(5,i=a.rows),"desiredColumns"in a&&n(4,o=a.desiredColumns),"preferredColumns"in a&&n(6,s=a.preferredColumns),"readyRows"in a&&n(1,m=a.readyRows)},e.$$.update=()=>{e.$$.dirty&36&&n(1,m=Vt(i,l.sortedBy,l.filters,l.matchAll))},[r,m,l,f,o,i,s,h,_]}class sn extends W{constructor(t){super(),K(this,t,on,rn,G,{columns:0,rows:5,desiredColumns:4,preferredColumns:6,readyRows:1})}}function un(e){let t;return{c(){t=N("Load")},m(n,l){R(n,t,l)},d(n){n&&B(t)}}}function cn(e){let t;return{c(){t=N("Download")},m(n,l){R(n,t,l)},d(n){n&&B(t)}}}function fn(e){let t,n,l,r,i,o,s,c,u,f,m,h,_,a,w,D,j,H,z,b,E,F,L,J,Y,q,v,fe;a=new _e({props:{$$slots:{default:[un]},$$scope:{ctx:e}}}),a.$on("click",e[6]),E=new _e({props:{$$slots:{default:[cn]},$$scope:{ctx:e}}}),E.$on("click",e[8]);function k(y){e[9](y)}let O={rows:e[0]};return e[1]!==void 0&&(O.readyRows=e[1]),J=new sn({props:O}),oe.push(()=>ve(J,"readyRows",k)),{c(){t=p("div"),n=p("div"),l=p("div"),r=p("div"),i=p("label"),i.textContent="Upload JSON file",o=S(),s=p("input"),c=S(),u=p("div"),f=p("label"),f.textContent="Load from url",m=S(),h=p("input"),_=S(),T(a.$$.fragment),w=S(),D=p("div"),j=p("p"),H=N(`Download data in this window (filtered data)
          `),z=p("input"),b=S(),T(E.$$.fragment),F=S(),L=p("div"),T(J.$$.fragment),g(i,"for","file"),g(s,"id","file"),g(s,"type","file"),g(s,"accept",".json"),g(r,"class","flex p-4 items-center gap-2"),g(f,"for","url"),g(h,"class","grow p-2 text-black"),g(h,"id","url"),g(h,"type","url"),g(u,"class","flex p-4 items-center gap-2 w-full"),g(z,"class","p-2 text-black"),g(z,"type","text"),g(D,"class","flex p-4 items-center gap-2 w-full"),g(l,"class","bg-slate-800"),g(L,"class","border"),g(n,"class","overflow-scroll m-auto w-3/4 max-h-fit")},m(y,C){R(y,t,C),d(t,n),d(n,l),d(l,r),d(r,i),d(r,o),d(r,s),d(l,c),d(l,u),d(u,f),d(u,m),d(u,h),te(h,e[2]),d(u,_),I(a,u,null),d(l,w),d(l,D),d(D,j),d(j,H),d(j,z),te(z,e[3]),d(j,b),I(E,j,null),d(n,F),d(n,L),I(J,L,null),q=!0,v||(fe=[U(s,"change",e[4]),U(h,"input",e[5]),U(z,"input",e[7])],v=!0)},p(y,[C]){C&4&&h.value!==y[2]&&te(h,y[2]);const le={};C&2048&&(le.$$scope={dirty:C,ctx:y}),a.$set(le),C&8&&z.value!==y[3]&&te(z,y[3]);const Ee={};C&2048&&(Ee.$$scope={dirty:C,ctx:y}),E.$set(Ee);const pe={};C&1&&(pe.rows=y[0]),!Y&&C&2&&(Y=!0,pe.readyRows=y[1],$e(()=>Y=!1)),J.$set(pe)},i(y){q||($(a.$$.fragment,y),$(E.$$.fragment,y),$(J.$$.fragment,y),q=!0)},o(y){A(a.$$.fragment,y),A(E.$$.fragment,y),A(J.$$.fragment,y),q=!1},d(y){y&&B(t),P(a),P(E),P(J),v=!1,Q(fe)}}}function an(e,t,n){let l=[],r=[],i="",o="data.json";const s=_=>{let a=new FileReader;a.onload=w=>{n(0,l=JSON.parse(w.target.result)),console.log(l)},a.readAsText(_.target.files[0])};function c(){i=this.value,n(2,i)}const u=()=>{fetch(i).then(_=>_.json()).then(_=>{n(0,l=_)})};function f(){o=this.value,n(3,o)}const m=()=>{let _=document.createElement("a");_.href="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(r)),_.download=o,_.click()};function h(_){r=_,n(1,r)}return[l,r,i,o,s,c,u,f,m,h]}class dn extends W{constructor(t){super(),K(this,t,an,fn,G,{})}}new dn({target:document.getElementById("app")});
